@import play.api.Play.current;
@import play.api.Play;
<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="utf-8">
	<title></title>
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<meta name="description" content="Charisma, a fully featured, responsive, HTML5, Bootstrap admin template.">
	<meta name="author" content="Muhammad Usman">


	@css()
		
</head>

<body>
		<div class="container-fluid">
		<div class="row-fluid">
		
			<div class="row-fluid">
				<div class="span12 center login-header">
					<h1>登录页面</h1>
				</div><!--/span-->
			</div><!--/row-->
			
			<div class="row-fluid" ng-app="login-app" ng-controller="loginController">

				<div class="well span5 center login-box">
				   
					<div class="alert alert-info " id="loginerror" >请输入用户名和密码</div>
					<form class="form-horizontal" autocomplete="off" target="_parent" ng-submit="login()">
						<fieldset>
							<div class="input-prepend" title="用户名" data-rel="tooltip">
								<span class="add-on"><i class="icon-user"></i></span><input autofocus class="input-large span10"  ng-model="accountUser.username" required/>
							</div>
							<div class="clearfix"></div>

							<div class="input-prepend" title="密码" data-rel="tooltip">
								<span class="add-on"><i class="icon-lock"></i></span><input class="input-large span10" ng-model="accountUser.password" type="password" required/>
							</div>
							<div class="clearfix"></div>

							<p class="center span5">
								<button type="submit" class="btn btn-primary">登录</button>
							</p>
							<p class="center span5">
								若没有账号，点此<a href="@routes.ApplicationController.doRegister">注册</a>
								
							</p>
						</fieldset>
					</form>
				</div><!--/span-->
			</div><!--/row-->
						
			
			
				</div><!--/fluid-row-->
		
	</div><!--/.fluid-container-->



	@script()
	<script type="text/javascript">
	 @if(flash.get("error")!=null){
		   $("#loginerror").attr("class","alert alert-error");
		   $("#loginerror").html("@flash.get("error")");
	   }

	</script>

    <script>
        var app = angular.module("login-app", []);
        app.controller("loginController", function($scope, $q, $http ) {
            $scope.accountUser = {};
            $scope.login = function() {
                var deferred ;
                console.debug ( " login()" ) ;
                deferred = $q.defer ( ) ;

                $http.post ("/education/admin/dologin", $scope.accountUser ).then ( function ( data ) {
                     console.info ( "Successfully login " ) ;
                     return deferred.resolve ( data ) ;
                }, function ( data, status ) {
                     console.error ( "Failed to login - status " + status ) ;
                     return deferred.reject ( data ) ;
                } ) ;
            }
        });
    </script>


		
</body>
</html>
